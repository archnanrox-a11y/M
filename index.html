<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Be My Valentine?</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600;700&family=Dancing+Script:wght@500;600;700&display=swap");

      :root {
        --pink-1: #ffe3ec;
        --pink-2: #ffd1df;
        --pink-3: #ffb9cd;
        --ink: #2c2c2c;
        --accent: #ff4d7a;
        --accent-dark: #e83b69;
        --soft: #fff2f7;
        --shadow: rgba(0, 0, 0, 0.12);
        --gold-1: #d7b46a;
        --gold-2: #f4e1b5;
        --gold-3: #b88b3a;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        font-family: "Playfair Display", "Times New Roman", serif;
        color: var(--ink);
        background: radial-gradient(circle at 20% 10%, #fff7fb, var(--pink-1) 55%, #f6c8d6 100%);
        display: grid;
        place-items: center;
        overflow: hidden;
      }

      .screen {
        position: absolute;
        inset: 0;
        display: grid;
        place-items: center;
        transition: opacity 0.7s ease, transform 0.7s ease;
        padding: 20px;
      }

      .screen.hidden {
        opacity: 0;
        pointer-events: none;
        transform: translateY(8px) scale(0.985);
      }

      .vignette {
        position: absolute;
        inset: 0;
        pointer-events: none;
        background: radial-gradient(circle at center, rgba(0, 0, 0, 0) 55%, rgba(0, 0, 0, 0.18) 100%);
        z-index: 2;
      }

      .grain {
        position: absolute;
        inset: 0;
        pointer-events: none;
        background-image: repeating-radial-gradient(
          circle at 50% 50%,
          rgba(255, 255, 255, 0.06) 0,
          rgba(255, 255, 255, 0.06) 1px,
          rgba(0, 0, 0, 0.04) 2px,
          rgba(0, 0, 0, 0.04) 3px
        );
        mix-blend-mode: soft-light;
        opacity: 0.25;
        z-index: 1;
      }

      .start-btn {
        background: white;
        border: 2px solid var(--accent);
        color: var(--accent-dark);
        padding: 16px 30px;
        font-size: 20px;
        border-radius: 999px;
        cursor: pointer;
        box-shadow: 0 10px 25px var(--shadow);
        display: inline-flex;
        align-items: center;
        gap: 8px;
        letter-spacing: 0.6px;
        transition: transform 0.25s ease, box-shadow 0.25s ease;
      }

      .start-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 14px 28px rgba(0, 0, 0, 0.16);
      }

      .start-btn span {
        font-size: 22px;
      }

      .card {
        width: min(860px, 94vw);
        background: rgba(255, 255, 255, 0.55);
        border-radius: 26px;
        box-shadow: 0 14px 40px var(--shadow);
        padding: 32px 34px 28px;
        position: relative;
        backdrop-filter: blur(10px);
        overflow: hidden;
      }

      .card::before {
        content: "";
        position: absolute;
        inset: 0;
        padding: 1.5px;
        border-radius: 26px;
        background: linear-gradient(135deg, rgba(244, 225, 181, 0.9), rgba(184, 139, 58, 0.6), rgba(255, 255, 255, 0.4));
        -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        pointer-events: none;
      }

      h1 {
        margin: 0 0 8px;
        text-align: center;
        font-size: clamp(26px, 4.6vw, 38px);
        letter-spacing: 0.8px;
      }

      .sub {
        text-align: center;
        margin: 0 0 20px;
        color: #5f5f5f;
        letter-spacing: 0.4px;
      }

      .play-area {
        position: relative;
        min-height: 300px;
        display: grid;
        place-items: center;
      }

      .btn-row {
        display: flex;
        gap: 16px;
        flex-wrap: wrap;
        justify-content: center;
        z-index: 2;
      }

      button {
        border: none;
        border-radius: 999px;
        padding: 12px 26px;
        font-size: 18px;
        cursor: pointer;
        transition: transform 0.2s ease, opacity 0.2s ease, box-shadow 0.2s ease;
        box-shadow: 0 6px 16px var(--shadow);
        position: relative;
        overflow: hidden;
      }

      button::after {
        content: "";
        position: absolute;
        top: -120%;
        left: -40%;
        width: 160%;
        height: 240%;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.65), rgba(255, 255, 255, 0) 55%);
        transform: translateX(-60%) rotate(10deg);
        opacity: 0;
        transition: opacity 0.25s ease, transform 0.35s ease;
      }

      button:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 22px rgba(0, 0, 0, 0.16);
      }

      button:hover::after {
        opacity: 1;
        transform: translateX(0) rotate(10deg);
      }

      button:focus-visible {
        outline: 3px solid var(--pink-3);
        outline-offset: 3px;
      }

      #yesBtn {
        background: linear-gradient(135deg, #ff5b8a, #ff3a6f);
        color: white;
        font-weight: 700;
        letter-spacing: 0.6px;
        text-transform: uppercase;
      }

      #yesBtn.locked {
        opacity: 0.6;
        cursor: not-allowed;
        filter: grayscale(0.3);
      }

      #noBtn {
        position: absolute;
        background: #fff;
        color: var(--ink);
        border: 2px solid var(--accent);
      }

      #thinkBtn {
        background: #fff0f5;
        color: var(--ink);
        border: 2px dashed #ff99b3;
      }

      .red-heart {
        color: #e63559;
      }

      .pulse-heart {
        animation: pulse 1.1s ease-in-out infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
          box-shadow: 0 0 0 0 rgba(255, 77, 122, 0.45);
        }
        70% {
          transform: scale(1.06);
          box-shadow: 0 0 0 16px rgba(255, 77, 122, 0);
        }
        100% {
          transform: scale(1);
          box-shadow: 0 0 0 0 rgba(255, 77, 122, 0);
        }
      }

      .hearts-bg {
        position: absolute;
        inset: 0;
        overflow: hidden;
        pointer-events: none;
        z-index: 0;
        -webkit-mask-image: linear-gradient(180deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0.85) 30%, rgba(0, 0, 0, 0.7) 70%, rgba(0, 0, 0, 0.65) 100%);
        mask-image: linear-gradient(180deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0.85) 30%, rgba(0, 0, 0, 0.7) 70%, rgba(0, 0, 0, 0.65) 100%);
      }

      .hearts-front {
        position: absolute;
        inset: 0;
        overflow: hidden;
        pointer-events: none;
        z-index: 3;
        -webkit-mask-image: linear-gradient(180deg, rgba(0, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0.6) 35%, rgba(0, 0, 0, 0.35) 100%);
        mask-image: linear-gradient(180deg, rgba(0, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0.6) 35%, rgba(0, 0, 0, 0.35) 100%);
      }

      .heart {
        position: absolute;
        bottom: -30px;
        font-size: 14px;
        color: #ff6a8d;
        opacity: 0.35;
        animation: floatUp 12s linear infinite;
        text-shadow: 0 0 6px rgba(255, 105, 135, 0.45);
      }

      @keyframes floatUp {
        0% {
          transform: translateY(0) scale(0.8);
          opacity: 0;
        }
        20% {
          opacity: 0.7;
        }
        100% {
          transform: translateY(-520px) scale(1.15);
          opacity: 0;
        }
      }

      .final-card {
        width: min(760px, 94vw);
        background: #fffafc;
        border-radius: 24px;
        padding: 38px 38px 44px;
        box-shadow: 0 14px 40px var(--shadow);
        position: relative;
      }

      .final-card::before {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: 24px;
        background: linear-gradient(180deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0));
        pointer-events: none;
      }

      .letter {
        background: #fff7fb;
        border-radius: 18px;
        padding: 28px 26px 30px;
        box-shadow: inset 0 0 0 1px rgba(184, 139, 58, 0.2);
      }

      .letter-divider {
        height: 1px;
        width: 100%;
        background: linear-gradient(90deg, rgba(184, 139, 58, 0), rgba(184, 139, 58, 0.6), rgba(184, 139, 58, 0));
        margin: 10px 0 18px;
      }

      .typewriter {
        white-space: pre-wrap;
        font-family: "Dancing Script", "Brush Script MT", "Segoe Script", cursive;
        font-size: 24px;
        line-height: 1.75;
        min-height: 260px;
      }

      .confetti-layer {
        position: absolute;
        inset: 0;
        pointer-events: none;
        overflow: hidden;
        z-index: 4;
      }

      .confetti {
        position: absolute;
        width: 8px;
        height: 14px;
        opacity: 0.9;
        animation: fall 3.2s linear forwards;
      }

      .monogram {
        margin-top: 18px;
        text-align: center;
        font-size: 16px;
        letter-spacing: 4px;
        color: rgba(184, 139, 58, 0.9);
        text-transform: uppercase;
      }

      @keyframes fall {
        0% {
          transform: translateY(-20px) rotate(0deg);
        }
        100% {
          transform: translateY(110vh) rotate(540deg);
          opacity: 0;
        }
      }

      @media (max-width: 600px) {
        .play-area {
          min-height: 380px;
        }
        .btn-row {
          gap: 12px;
        }
        button {
          font-size: 16px;
          padding: 10px 22px;
        }
        .typewriter {
          font-size: 20px;
        }
      }
    </style>
  </head>
  <body>
    <div class="hearts-bg" id="heartsBg" aria-hidden="true"></div>
    <div class="hearts-front" id="heartsFront" aria-hidden="true"></div>
    <div class="confetti-layer" id="confettiLayer" aria-hidden="true"></div>
    <div class="grain" aria-hidden="true"></div>
    <div class="vignette" aria-hidden="true"></div>

    <section class="screen" id="startScreen">
      <button class="start-btn" id="startBtn">
        Tap to open <span>♥</span>
      </button>
    </section>

    <section class="screen hidden" id="questionScreen">
      <div class="card">
        <h1>
          Mehak <span class="red-heart" aria-hidden="true">♥</span> Will you be my
          Valentine?
        </h1>
        <p class="sub">Choose carefully. The universe is watching.</p>
        <div class="play-area" id="playArea">
          <div class="btn-row">
            <button id="yesBtn" class="locked" aria-disabled="true">Yes</button>
            <button id="thinkBtn">I'll think about it</button>
          </div>
          <button id="noBtn">No</button>
        </div>
        <div class="monogram">M ♥</div>
      </div>
    </section>

    <section class="screen hidden" id="finalScreen">
      <div class="final-card">
        <div class="letter">
          <div class="letter-divider"></div>
          <div class="typewriter" id="typewriter"></div>
        </div>
      </div>
    </section>

    <script>
      const startScreen = document.getElementById("startScreen");
      const questionScreen = document.getElementById("questionScreen");
      const finalScreen = document.getElementById("finalScreen");
      const startBtn = document.getElementById("startBtn");
      const playArea = document.getElementById("playArea");
      const noBtn = document.getElementById("noBtn");
      const yesBtn = document.getElementById("yesBtn");
      const thinkBtn = document.getElementById("thinkBtn");
      const typewriter = document.getElementById("typewriter");
      const heartsBg = document.getElementById("heartsBg");
      const confettiLayer = document.getElementById("confettiLayer");
      const heartsFront = document.getElementById("heartsFront");

      const noteText =
        "To me, you are the most beautiful person in the world, Mehak.\n" +
        "Not just in the way you look, but in the way you think, feel, and exist.\n" +
        "You are the pinnacle of beauty in my eyes—today and always.\n" +
        "I Love you ❤️.";

      let jumps = 0;
      const maxJumps = 10;

      const placeNoButton = () => {
        const areaRect = playArea.getBoundingClientRect();
        const btnRect = noBtn.getBoundingClientRect();
        const padding = 14;
        const maxX = areaRect.width - btnRect.width - padding;
        const maxY = areaRect.height - btnRect.height - padding;
        const x = Math.max(padding, Math.random() * maxX);
        const y = Math.max(padding, Math.random() * maxY);
        noBtn.style.left = `${x}px`;
        noBtn.style.top = `${y}px`;
      };

      const growYes = () => {
        const scale = 1 + jumps * 0.08;
        yesBtn.style.transform = `scale(${scale})`;
      };

      const unlockYes = () => {
        yesBtn.classList.remove("locked");
        yesBtn.removeAttribute("aria-disabled");
        yesBtn.classList.add("pulse-heart");
      };

      const handleNoHover = () => {
        if (jumps >= maxJumps) {
          return;
        }
        jumps += 1;
        placeNoButton();
        growYes();
        if (jumps >= maxJumps) {
          noBtn.style.display = "none";
          unlockYes();
        }
      };

      const handleThinkHover = () => {
        thinkBtn.style.opacity = "0";
        thinkBtn.style.pointerEvents = "none";
        setTimeout(() => {
          thinkBtn.style.display = "none";
        }, 200);
      };

      const sendYesNotification = () => {
        const gmtMinus5 = new Date().toLocaleString("en-US", {
          timeZone: "Etc/GMT+5",
        });
        fetch("https://formspree.io/f/xbdkvplr", {
          method: "POST",
          headers: {
            Accept: "application/json",
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            event: "yes_clicked",
            message: "She clicked yes!",
            timestamp_gmt_minus_5: gmtMinus5,
            timestamp_utc: new Date().toISOString(),
          }),
        }).catch(() => {});
      };

      const typewrite = (text) => {
        typewriter.textContent = "";
        let i = 0;
        const tick = () => {
          if (i <= text.length) {
            typewriter.textContent = text.slice(0, i);
            i += 1;
            const lastChar = text[i - 1];
            const pause = lastChar === "\n" ? 520 : 36;
            setTimeout(tick, pause);
          }
        };
        tick();
      };

      const handleYesClick = () => {
        if (yesBtn.classList.contains("locked")) {
          return;
        }
        sendYesNotification();
        questionScreen.classList.add("hidden");
        finalScreen.classList.remove("hidden");
        typewrite(noteText);
        launchConfetti();
      };

      const spawnHearts = () => {
        for (let i = 0; i < 18; i += 1) {
          const heart = document.createElement("div");
          heart.className = "heart";
          heart.textContent = "♥";
          heart.style.left = `${Math.random() * 100}%`;
          heart.style.animationDelay = `${Math.random() * 10}s`;
          heart.style.fontSize = `${8 + Math.random() * 12}px`;
          heart.style.opacity = `${0.2 + Math.random() * 0.25}`;
          heartsBg.appendChild(heart);
        }

        for (let i = 0; i < 8; i += 1) {
          const heart = document.createElement("div");
          heart.className = "heart";
          heart.textContent = "♥";
          heart.style.left = `${Math.random() * 100}%`;
          heart.style.animationDelay = `${Math.random() * 10}s`;
          heart.style.fontSize = `${9 + Math.random() * 12}px`;
          heart.style.opacity = `${0.15 + Math.random() * 0.2}`;
          heartsFront.appendChild(heart);
        }
      };

      const launchConfetti = () => {
        const colors = ["#ff4d7a", "#ff9fb2", "#ffd166", "#cdb4db", "#a2d2ff"];
        for (let i = 0; i < 120; i += 1) {
          const piece = document.createElement("div");
          piece.className = "confetti";
          piece.style.left = `${Math.random() * 100}%`;
          piece.style.background = colors[i % colors.length];
          piece.style.animationDelay = `${Math.random() * 0.4}s`;
          piece.style.transform = `rotate(${Math.random() * 360}deg)`;
          confettiLayer.appendChild(piece);
          piece.addEventListener("animationend", () => piece.remove());
        }
      };

      startBtn.addEventListener("click", () => {
        startScreen.classList.add("hidden");
        questionScreen.classList.remove("hidden");
        placeNoButton();
        growYes();
        spawnHearts();
      });

      noBtn.addEventListener("mouseenter", handleNoHover);
      noBtn.addEventListener("click", handleNoHover);
      noBtn.addEventListener("touchstart", handleNoHover, { passive: true });
      thinkBtn.addEventListener("mouseenter", handleThinkHover);
      thinkBtn.addEventListener("touchstart", handleThinkHover, { passive: true });
      yesBtn.addEventListener("click", handleYesClick);
    </script>
  </body>
</html>
